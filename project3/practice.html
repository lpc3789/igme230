<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Hello World</title>
    <script src="d3.min.js"></script>
    <style>
        .static {
            cursor: not-allowed;
        }

        .draggable {
            cursor: move;
        }
    </style>
</head>



<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 20" onload="makeDraggable(evt)">

    <style>
      .static {
        cursor: not-allowed;
      }
      .draggable {
        cursor: move;
      }
    </style>

    <script type="text/javascript"><![CDATA[
      function makeDraggable(evt) {
        var svg = evt.target;

        svg.addEventListener('mousedown', startDrag);
        svg.addEventListener('mousemove', drag);
        svg.addEventListener('mouseup', endDrag);
        svg.addEventListener('mouseleave', endDrag);
        svg.addEventListener('touchstart', startDrag);
        svg.addEventListener('touchmove', drag);
        svg.addEventListener('touchend', endDrag);
        svg.addEventListener('touchleave', endDrag);
        svg.addEventListener('touchcancel', endDrag);

        function getMousePosition(evt) {
          var CTM = svg.getScreenCTM();
          if (evt.touches) { evt = evt.touches[0]; }
          return {
            x: (evt.clientX - CTM.e) / CTM.a,
            y: (evt.clientY - CTM.f) / CTM.d
          };
        }

        var selectedElement, offset, transform;

        function startDrag(evt) {
          if (evt.target.classList.contains('draggable')) {
            selectedElement = evt.target;
            offset = getMousePosition(evt);

            // Make sure the first transform on the element is a translate transform
            var transforms = selectedElement.transform.baseVal;

            if (transforms.length === 0 || transforms.getItem(0).type !== SVGTransform.SVG_TRANSFORM_TRANSLATE) {
              // Create an transform that translates by (0, 0)
              var translate = svg.createSVGTransform();
              translate.setTranslate(0, 0);
              selectedElement.transform.baseVal.insertItemBefore(translate, 0);
            }

            // Get initial translation
            transform = transforms.getItem(0);
            offset.x -= transform.matrix.e;
            offset.y -= transform.matrix.f;
          }
        }

        function drag(evt) {
          if (selectedElement) {
            evt.preventDefault();
            var coord = getMousePosition(evt);
            transform.setTranslate(coord.x - offset.x, coord.y - offset.y);
          }
        }

        function endDrag(evt) {
          selectedElement = false;
        }
      }
    ]]> </script>

    <rect x="0" y="0" width="30" height="20" fill="#eee"/>
    <rect class="static" fill="#888" x="2" y="4" width="6" height="2"/>
    <rect class="draggable" fill="#007bff" x="2" y="4" width="6" height="2" transform="rotate(90, 5, 5) translate(10, 0)"/>
    <ellipse class="draggable" fill="#ff00af" cx="5" cy="5" rx="3" ry="2" transform="translate(10, 0)"/>
    <polygon class="draggable" fill="#ffa500" transform="rotate(15, 15, 15)" points="16.9 15.6 17.4 18.2 15 17 12.6 18.2 13.1 15.6 11.2 13.8 13.8 13.4 15 11 16.2 13.4 18.8 13.8"/>
    <path class="draggable" stroke="#2bad7b" stroke-width="0.5" fill="none" d="M1 5C5 1 5 9 9 5" transform="translate(20)"/>
    <text class="draggable" x="25" y="15" text-anchor="middle" font-size="3px" alignment-baseline="middle">Drag</text>
    <rect class="draggable" fill="#000000" x="2" y="4" width="6" height="2" transform="rotate(90, 5, 5) translate(10, 0)"/>
</svg>

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"><defs><style>.cls-1{fill:#799bc5;}.cls-2{fill:#8bb5e3;}.cls-3{fill:#c6dbf5;}.cls-4{fill:#789cc7;}</style></defs><title>Untitled-3</title><g id="Hat"><path class="draggable" class="cls-1" d="M141.75,203.58s-123.29,37.06-36.68,47.14,38.12-32.87,193.14-25.62C298.21,225.1,280.3,187.63,141.75,203.58Z"/><path class="draggable" class="cls-2" d="M112.31,219s-40.47-30.67,7.47-48,84.18-11.71,99.79-4.46c0,0,38.57-7.82,73.22,9.62s42.65,87.36-62.19,49.44C230.6,225.61,142.09,239.84,112.31,219Z"/><path class="draggable" class="cls-3" d="M101.14,207.06s18.16,34,78.49,19.9C179.63,227,129.08,234.19,101.14,207.06Z"/><path class="draggable" class="cls-3" d="M245.1,230.39s-19-7.94-45.95-5.71C199.15,224.68,223.59,215,245.1,230.39Z"/><path class="draggable" class="cls-4" d="M215.39,167.23a44.94,44.94,0,0,0-32.47,4.14S198.55,166,215.39,167.23Z"/><path class="draggable" class="cls-4" d="M224.53,167s11.06-1,16.83,6.73A55.36,55.36,0,0,0,224.53,167Z"/><path class="draggable" class="cls-4" d="M220.53,167.79s6.53,7.14,4,15.77C224.53,183.56,230.61,172.32,220.53,167.79Z"/><circle class="draggable" class="cls-3" cx="220.53" cy="162.92" r="8.68"/></g>

<script type="text/javascript"><![CDATA[
      function makeDraggable(evt) {
        var svg = evt.target;

        svg.addEventListener('mousedown', startDrag);
        svg.addEventListener('mousemove', drag);
        svg.addEventListener('mouseup', endDrag);
        svg.addEventListener('mouseleave', endDrag);
        svg.addEventListener('touchstart', startDrag);
        svg.addEventListener('touchmove', drag);
        svg.addEventListener('touchend', endDrag);
        svg.addEventListener('touchleave', endDrag);
        svg.addEventListener('touchcancel', endDrag);

        function getMousePosition(evt) {
          var CTM = svg.getScreenCTM();
          if (evt.touches) { evt = evt.touches[0]; }
          return {
            x: (evt.clientX - CTM.e) / CTM.a,
            y: (evt.clientY - CTM.f) / CTM.d
          };
        }

        var selectedElement, offset, transform;

        function startDrag(evt) {
          if (evt.target.classList.contains('draggable')) {
            selectedElement = evt.target;
            offset = getMousePosition(evt);

            // Make sure the first transform on the element is a translate transform
            var transforms = selectedElement.transform.baseVal;

            if (transforms.length === 0 || transforms.getItem(0).type !== SVGTransform.SVG_TRANSFORM_TRANSLATE) {
              // Create an transform that translates by (0, 0)
              var translate = svg.createSVGTransform();
              translate.setTranslate(0, 0);
              selectedElement.transform.baseVal.insertItemBefore(translate, 0);
            }

            // Get initial translation
            transform = transforms.getItem(0);
            offset.x -= transform.matrix.e;
            offset.y -= transform.matrix.f;
          }
        }

        function drag(evt) {
          if (selectedElement) {
            evt.preventDefault();
            var coord = getMousePosition(evt);
            transform.setTranslate(coord.x - offset.x, coord.y - offset.y);
          }
        }

        function endDrag(evt) {
          selectedElement = false;
        }
      }
    ]]> </script>
</svg>

</html>
