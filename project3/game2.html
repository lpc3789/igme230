<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Constantino IGME-230 Project 3</title>
    <link rel="stylesheet" href="project3.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="d3.min.js"></script>
</head>

<body>
    <div id="wrapper">
        <header>
            <h1>Dress-Up Game 2</h1>
        </header>
        <div id="homepage">
            <a href="index.html">
                <div id="backButton">
                    <a href="index.html">Back to Home</a>
                </div>
            </a>
        </div>
        <div id="leftPanel">
            <img class="character" src="media/bear.png">
        </div>
        <div id="sectionSelect">
            <img class="sectionCircles" id="defaultOpen" src="media/hatIcon.svg" onclick="openTab(event, 'hats')">
            <img class="sectionCircles" src="media/shirtIcon.svg" onclick="openTab(event, 'shirts')">
            <img class="sectionCircles" src="media/pantsIcon.svg" onclick="openTab(event, 'pants')">
        </div>
        <div id="clothingSelect">
            <div id="shirts" class="tabcontent">
                <div class="clothingBoxes">
                    <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"><defs><style>.cls-1{fill:#ffecf0;}.cls-2{fill:#fff;}.cls-3{fill:#f2d5dd;}</style></defs><title>pinkShirt</title><g class="draggable" id="Pink_Shirt" data-name="Pink Shirt"><path class="cls-1" d="M373.67,162.94s-37.36-69-108.52-77.28h0l-32.67,56.67,58.41,80.21S362.12,206.81,373.67,162.94Z"/><path class="cls-2" d="M375.24,163l-7.74-9.52S336.09,204.07,280.28,206l10.61,16.59S362.24,206.54,375.24,163Z"/><path class="cls-1" d="M23.69,161.45s40.63-67.16,112.11-72h0l29.91,58.17L103.51,225S33.11,205.81,23.69,161.45Z"/><path class="cls-2" d="M22.12,161.39l8.19-9.14s28.93,52.08,84.59,56.64L103.51,225S33,205.55,22.12,161.39Z"/><path class="cls-1" d="M313.8,175.92S335,245.3,313.85,293s-205.17,48.6-232.61,4.09c0,0-10.7-9.56-7-82.18"/><path class="cls-1" d="M79.52,175.23s-21.17,69.37-.09,117S284.59,341,312,296.46c0,0,10.71-9.56,7-82.18,0,0,17.84-120.74-50.92-126.15L136,89"/><path class="cls-3" d="M81.24,297.07s-21.3-28.17-1.62-108.41c0,0-4.73,108.12,23.15,112.48Z"/><path class="cls-3" d="M313.8,175.92S334.87,243,313.85,293l-13.44,5.61s19.88-49.72,9.95-121.78Z"/><path class="cls-2" d="M186,110.15s.66,134.54-13.29,217.62c0,0,14.13,1.08,23.41,1.23,0,0,7.11-186.45,5.86-218.85A37.23,37.23,0,0,1,186,110.15Z"/><circle class="cls-3" cx="194.22" cy="128.61" r="6.26"/><circle class="cls-3" cx="193.32" cy="152.89" r="6.26"/><circle class="cls-3" cx="192.83" cy="178.23" r="6.26"/><circle class="cls-3" cx="191.49" cy="203" r="6.26"/><circle class="cls-3" cx="190.36" cy="230.32" r="6.26"/><circle class="cls-3" cx="189.82" cy="257.65" r="6.26"/><circle class="cls-3" cx="186.55" cy="286.41" r="6.26"/><path class="cls-3" d="M317.31,188.7S311,161.6,305.72,154c0,0,4.5,16,6.7,42.77S317.31,188.7,317.31,188.7Z"/><path class="cls-3" d="M125.23,88.75s65.52,53.48,141.75,0Z"/><circle class="cls-3" cx="185.55" cy="312.41" r="6.26"/></g></svg>
                </div>
                <div class="clothingBoxes">
                    <img class="clothing" src="media/blueShirt.svg">
                </div>
                <div class="clothingBoxes">
                    <img class="clothing" src="media/purpleShirt.svg">
                </div>
                <div class="clothingBoxes">
                    <img class="clothing" src="media/redShirt.svg">
                </div>
            </div>
            <div id="pants" class="tabcontent">
                <div class="clothingBoxes">
                    <img class="clothing" src="media/bluePants.svg">
                </div>
                <div class="clothingBoxes">
                    <img class="clothing" src="media/pinkSkirt.svg">
                </div>
                <div class="clothingBoxes">
                    <img class="clothing" src="media/purpleSkirt.svg">
                </div>
                <div class="clothingBoxes">
                    <img class="clothing" src="media/blackPants.svg">
                </div>
            </div>
            <div id="hats" class="tabcontent">
                <div class="clothingBoxes">
                    <img class="clothing" src="media/pinkBow.svg">
                </div>
                <div class="clothingBoxes">
                    <img class="clothing" src="media/goldNecklace.svg">
                </div>
                <div class="clothingBoxes">
                    <img class="clothing" src="media/blueTie.svg">
                </div>
                <div class="clothingBoxes">
                    <img class="clothing" src="media/blueHat.svg">
                </div>
            </div>
        </div>
    </div>

    <script>
        // Get the element with id="defaultOpen" and click on it
        document.getElementById("defaultOpen").click();

        //switches between tabs
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        //        //uses nested functions to make the clothing elements draggable
        function makeDraggable(evt) {
            var svg = evt.target;

            svg.addEventListener('mousedown', startDrag);
            svg.addEventListener('mousemove', drag);
            svg.addEventListener('mouseup', endDrag);
            svg.addEventListener('mouseleave', endDrag);
            svg.addEventListener('touchstart', startDrag);
            svg.addEventListener('touchmove', drag);
            svg.addEventListener('touchend', endDrag);
            svg.addEventListener('touchleave', endDrag);
            svg.addEventListener('touchcancel', endDrag);

            function getMousePosition(evt) {
                var CTM = svg.getScreenCTM();
                if (evt.touches) {
                    evt = evt.touches[0];
                }
                return {
                    x: (evt.clientX - CTM.e) / CTM.a,
                    y: (evt.clientY - CTM.f) / CTM.d
                };
            }

            var selectedElement, offset, transform;

            function startDrag(evt) {
                if (evt.target.classList.contains('draggable')) {
                    selectedElement = evt.target;
                    offset = getMousePosition(evt);

                    // Make sure the first transform on the element is a translate transform
                    var transforms = selectedElement.transform.baseVal;

                    if (transforms.length === 0 || transforms.getItem(0).type !== SVGTransform.SVG_TRANSFORM_TRANSLATE) {
                        // Create an transform that translates by (0, 0)
                        var translate = svg.createSVGTransform();
                        translate.setTranslate(0, 0);
                        selectedElement.transform.baseVal.insertItemBefore(translate, 0);
                    }

                    // Get initial translation
                    transform = transforms.getItem(0);
                    offset.x -= transform.matrix.e;
                    offset.y -= transform.matrix.f;
                }
            }

            function drag(evt) {
                if (selectedElement) {
                    evt.preventDefault();
                    var coord = getMousePosition(evt);
                    transform.setTranslate(coord.x - offset.x, coord.y - offset.y);
                }
            }

            function endDrag(evt) {
                selectedElement = false;
            }
        }


        //        var svg = d3.select("svg");
        //        svg.selectAll("use")
        //            .data([{
        //                x: 50,
        //                y: 50
        //            }])
        //            .enter()
        //            .append("use")
        //            .attr("href", "#Pink_Shirt")
        //            .attr("x", function(d) {
        //                return (d.x)
        //            })
        //            .attr("y", function(d) {
        //                return (d.y)
        //            })
        //
        //        var dragHandler = d3.drag()
        //            .on("drag", function(d) {
        //                d3.select(this)
        //                    .attr("x", d.x = d3.event.x)
        //                    .attr("y", d.y = d3.event.y);
        //            });
        //
        //
        //        dragHandler(svg.selectAll("use"));
    </script>
</body>
</html>
